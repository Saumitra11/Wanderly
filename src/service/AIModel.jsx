import { GoogleGenerativeAI } from "@google/generative-ai";

const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseModalities: [],
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: "Generate Travel Plan for Location : Madrid, for 3 days for couple with a cheap Budget, Give me a hotels options list with hotel name, hotel address, price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with place name, place details, place image url, geo coordinates, ticket pricing, rating, time travel each of the location for 3 days with each day plan with best time to visit in json format. All real and working urls needed for website.",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: 'Okay, here\'s a budget-friendly 3-day Madrid itinerary for a couple, along with some hotel options and all the details you requested.  I\'ve focused on free or low-cost activities and affordable accommodations. Since prices can change rapidly, especially for hotels, *please verify current prices and availability before booking*.\n\n**Important Notes:**\n\n*   **Hotel Prices:** Hotel prices are estimated based on averages for budget-friendly options. Expect them to fluctuate significantly depending on the season, demand, and booking website.\n*   **Ticket Prices:** Ticket prices are also estimates. Always check the official website for the most up-to-date information. Many museums offer free entry during certain hours or on specific days.\n*   **Travel Times:** Travel times are approximate and depend on your mode of transportation (walking, metro, bus).  Madrid has an excellent metro system, so I\'ve factored that in.\n*   **"Cheap Budget":** I\'ve interpreted this as focusing on accommodations under €100 per night (though prices may vary).  Food is assumed to be a mix of budget-friendly tapas, market food, and occasional sit-down meals.\n*   **URLs:** All image URLs provided are direct links to representative images. Actual views may vary.\n*   **Ratings:** Ratings are based on averages from various online review sites.\n*   **Safety:** Like any major city, be aware of your surroundings, especially in crowded areas.\n\n```json\n{\n  "tripTitle": "Madrid Budget Getaway: 3 Days for a Couple",\n  "budget": "Cheap",\n  "location": "Madrid, Spain",\n  "duration": "3 Days",\n  "travelers": "Couple",\n  "hotelOptions": [\n    {\n      "hotelName": "Hostal Central Palace Madrid",\n      "hotelAddress": "Plaza Isabel II, 4, Centro, 28013 Madrid, Spain",\n      "price": "€60-€90 per night (estimated)",\n      "hotelImageUrl": "https://cf.bstatic.com/xdata/images/hotel/square600/301921245.jpg?k=98952d9101a2c083e928d08025a1a2a0961d296b6d3e60f6b6535516b597379b&o=",\n      "geoCoordinates": {\n        "latitude": 40.4181,\n        "longitude": -3.7096\n      },\n      "rating": 8.5,\n      "description": "Located in the heart of Madrid, near the Royal Palace and Opera. Offers clean, comfortable rooms at an affordable price.  Great location for exploring the city center."\n    },\n    {\n      "hotelName": "Room007 Chueca Hostel",\n      "hotelAddress": "Calle Hortaleza, 74, Centro, 28004 Madrid, Spain",\n      "price": "€50-€80 per night (estimated)",\n      "hotelImageUrl": "https://cf.bstatic.com/xdata/images/hotel/square600/134531037.jpg?k=f9c9ff6682d3547973981366015f4b61b009618c44dd61a3b272113e14550776&o=",\n      "geoCoordinates": {\n        "latitude": 40.4227,\n        "longitude": -3.6961\n      },\n      "rating": 8.0,\n      "description": "A stylish hostel in the vibrant Chueca district. Offers private rooms as well as dorms.  Social atmosphere and close to many bars and restaurants."\n    },\n    {\n      "hotelName": "Hostal Persal",\n      "hotelAddress": "Plaza del Ángel, 12, Centro, 28012 Madrid, Spain",\n      "price": "€65-€95 per night (estimated)",\n      "hotelImageUrl": "https://cf.bstatic.com/xdata/images/hotel/square600/147308650.jpg?k=688c1cf281a816623c306812241f6b474f22e9373c3b54993e620098d583f35e&o=",\n      "geoCoordinates": {\n        "latitude": 40.4151,\n        "longitude": -3.7043\n      },\n      "rating": 8.2,\n      "description": "Located near Puerta del Sol, this hostal offers simple but comfortable rooms.  A good budget option in a central location.  Many shops and restaurants nearby."\n    }\n  ],\n  "itinerary": {\n    "day1": {\n      "theme": "Historic Madrid & Tapas",\n      "bestTimeToVisit": "Morning and Evening",\n      "plan": [\n        {\n          "placeName": "Puerta del Sol",\n          "placeDetails": "Madrid\'s central square and a traditional meeting point. Kilometro Cero is the point from which all distances in Spain are measured.",\n          "placeImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/e/e7/Puerta_del_Sol_Madrid_August_2011-1a.jpg/1280px-Puerta_del_Sol_Madrid_August_2011-1a.jpg",\n          "geoCoordinates": {\n            "latitude": 40.4167,\n            "longitude": -3.7033\n          },\n          "ticketPricing": "Free",\n          "rating": 4.5,\n          "timeTravel": "5 minutes (walking from nearby hotels)"\n        },\n        {\n          "placeName": "Plaza Mayor",\n          "placeDetails": "A grand, historic square surrounded by beautiful buildings. Historically used for markets, bullfights, and public events.",\n          "placeImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/d/db/Madrid_Plaza_Mayor_01.jpg/1280px-Madrid_Plaza_Mayor_01.jpg",\n          "geoCoordinates": {\n            "latitude": 40.4156,\n            "longitude": -3.7072\n          },\n          "ticketPricing": "Free",\n          "rating": 4.6,\n          "timeTravel": "5 minutes (walking from Puerta del Sol)"\n        },\n        {\n          "placeName": "Mercado de San Miguel",\n          "placeDetails": "A beautiful glass-enclosed market offering a variety of tapas, drinks, and local products. Great for a budget-friendly lunch or snack.",\n          "placeImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/8/81/Mercado_de_San_Miguel_Madrid_April_2018-2.jpg/1280px-Mercado_de_San_Miguel_Madrid_April_2018-2.jpg",\n          "geoCoordinates": {\n            "latitude": 40.4158,\n            "longitude": -3.7094\n          },\n          "ticketPricing": "Free entry; food/drinks vary.",\n          "rating": 4.4,\n          "timeTravel": "3 minutes (walking from Plaza Mayor)"\n        },\n        {\n          "placeName": "Royal Palace of Madrid (Palacio Real)",\n          "placeDetails": "The official residence of the Spanish Royal Family (though not currently inhabited). Explore the palace grounds and gardens for free. Consider a guided tour inside (paid).",\n          "placeImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/8/88/Madrid_Royal_Palace_II_jaf.jpg/1280px-Madrid_Royal_Palace_II_jaf.jpg",\n          "geoCoordinates": {\n            "latitude": 40.4189,\n            "longitude": -3.7142\n          },\n          "ticketPricing": "€14 (basic entry), Free (gardens and exterior)",\n          "rating": 4.7,\n          "timeTravel": "10 minutes (walking from Mercado de San Miguel)"\n        },\n        {\n          "placeName": "Tapas Crawl in La Latina",\n          "placeDetails": "Explore the La Latina neighborhood and sample tapas at various bars. Many bars offer free tapas with a drink purchase.",\n          "placeImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/6/63/Calle_de_la_Cava_Baja%2C_Madrid%2C_Espa%C3%B1a%2C_2015-10-03%2C_DD_29.JPG/1280px-Calle_de_la_Cava_Baja%2C_Madrid%2C_Espa%C3%B1a%2C_2015-10-03%2C_DD_29.JPG",\n          "geoCoordinates": {\n            "latitude": 40.4125,\n            "longitude": -3.7111\n          },\n          "ticketPricing": "Varies depending on tapas and drinks",\n          "rating": 4.3,\n          "timeTravel": "15 minutes (walking from Royal Palace area)"\n        }\n      ]\n    },\n    "day2": {\n      "theme": "Art, Parks & Relaxation",\n      "bestTimeToVisit": "Morning for museums, afternoon for the park",\n      "plan": [\n        {\n          "placeName": "Museo Nacional del Prado",\n          "placeDetails": "One of the world\'s greatest art museums, featuring works by Spanish masters like Goya, Velázquez, and El Greco. Free entry 6 PM - 8 PM Monday to Saturday, and 5 PM - 7 PM on Sundays and holidays.",\n          "placeImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/6/66/Museo_del_Prado_Madrid_01.jpg/1280px-Museo_del_Prado_Madrid_01.jpg",\n          "geoCoordinates": {\n            "latitude": 40.4138,\n            "longitude": -3.6922\n          },\n          "ticketPricing": "€15 (general admission), Free (during free hours)",\n          "rating": 4.8,\n          "timeTravel": "15 minutes (metro from city center)"\n        },\n        {\n          "placeName": "Retiro Park (Parque del Retiro)",\n          "placeDetails": "A large and beautiful park with a lake, gardens, monuments, and walking paths. Rent a rowboat on the lake, visit the Crystal Palace, or simply relax and enjoy the scenery.",\n          "placeImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/c/cf/Madrid_Retiro_Park_Lake_01.jpg/1280px-Madrid_Retiro_Park_Lake_01.jpg",\n          "geoCoordinates": {\n            "latitude": 40.4163,\n            "longitude": -3.6822\n          },\n          "ticketPricing": "Free",\n          "rating": 4.7,\n          "timeTravel": "5 minutes (walking from Prado Museum)"\n        },\n        {\n          "placeName": "Crystal Palace (Palacio de Cristal)",\n          "placeDetails": "A stunning glass and iron structure located in Retiro Park. Often hosts art exhibitions.",\n          "placeImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/d/da/Palacio_de_Cristal_%28Madrid%29_04.jpg/1280px-Palacio_de_Cristal_%28Madrid%29_04.jpg",\n          "geoCoordinates": {\n            "latitude": 40.4145,\n            "longitude": -3.6793\n          },\n          "ticketPricing": "Free",\n          "rating": 4.6,\n          "timeTravel": "10 minutes (walking within Retiro Park from the lake)"\n        },\n         {\n          "placeName": "Puerta de Alcalá",\n          "placeDetails": "A neo-classical triumphal arch, one of Madrid\'s iconic landmarks. Located near Retiro Park.",\n          "placeImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/5/58/Puerta_de_Alcala_Madrid_jaf.jpg/1280px-Puerta_de_Alcala_Madrid_jaf.jpg",\n          "geoCoordinates": {\n            "latitude": 40.4196,\n            "longitude": -3.6882\n          },\n          "ticketPricing": "Free",\n          "rating": 4.5,\n          "timeTravel": "10 minutes (walking from Crystal Palace)"\n        },\n        {\n          "placeName": "Dinner in Lavapiés",\n          "placeDetails": "Explore the multicultural neighborhood of Lavapiés for affordable and diverse dining options.  Try Indian, Moroccan, or Senegalese cuisine.",\n          "placeImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/a/a0/Calle_de_la_Cabeza%2C_Lavapies%2C_Madrid.jpg/1280px-Calle_de_la_Cabeza%2C_Lavapies%2C_Madrid.jpg",\n          "geoCoordinates": {\n            "latitude": 40.4103,\n            "longitude": -3.7028\n          },\n          "ticketPricing": "Varies depending on restaurant",\n          "rating": 4.2,\n          "timeTravel": "15 minutes (metro from Puerta de Alcalá)"\n        }\n      ]\n    },\n    "day3": {\n      "theme": "Culture, Shopping & Farewell",\n      "bestTimeToVisit": "Morning for culture, afternoon for shopping",\n      "plan": [\n        {\n          "placeName": "Temple of Debod (Templo de Debod)",\n          "placeDetails": "An ancient Egyptian temple that was gifted to Spain. Offers stunning views of the city, especially at sunset.  A great free activity.",\n          "placeImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/a/a6/Templo_de_Debod_Madrid_Spain.jpg/1280px-Templo_de_Debod_Madrid_Spain.jpg",\n          "geoCoordinates": {\n            "latitude": 40.4222,\n            "longitude": -3.7194\n          },\n          "ticketPricing": "Free",\n          "rating": 4.7,\n          "timeTravel": "20 minutes (metro from city center)"\n        },\n        {\n          "placeName": "Gran Vía",\n          "placeDetails": "Madrid\'s main shopping street, lined with shops, theaters, and restaurants. Good for window shopping or picking up souvenirs.",\n          "placeImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/a/af/Gran_V%C3%ADa_Madrid_Spain_May_2017-6a.jpg/1280px-Gran_V%C3%ADa_Madrid_Spain_May_2017-6a.jpg",\n          "geoCoordinates": {\n            "latitude": 40.4197,\n            "longitude": -3.7044\n          },\n          "ticketPricing": "Free (shopping costs vary)",\n          "rating": 4.4,\n          "timeTravel": "15 minutes (metro from Temple of Debod)"\n        },\n        {\n          "placeName": "El Rastro Market (Sundays only)",\n          "placeDetails": "A large flea market held every Sunday morning. A good place to find unique souvenirs and local crafts. If your trip doesn\'t include a Sunday, consider visiting another local market.",\n          "placeImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/5/58/Rastro_Madrid_02.jpg/1280px-Rastro_Madrid_02.jpg",\n          "geoCoordinates": {\n            "latitude": 40.4097,\n            "longitude": -3.7083\n          },\n          "ticketPricing": "Free entry; shopping costs vary",\n          "rating": 4.3,\n          "timeTravel": "10 minutes (metro from Gran Vía)"\n        },\n        {\n          "placeName": "Reina Sofia Museum (Museo Nacional Centro de Arte Reina Sofía)",\n          "placeDetails": "Home to modern and contemporary Spanish art, including Picasso\'s Guernica. Free entry 7 PM - 9 PM Monday and Wednesday to Saturday, and 1:30 PM - 7 PM on Sundays. Closed on Tuesdays.",\n          "placeImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/b/b7/Madrid_Reina_Sofia_Museum_01.jpg/1280px-Madrid_Reina_Sofia_Museum_01.jpg",\n          "geoCoordinates": {\n            "latitude": 40.4108,\n            "longitude": -3.6935\n          },\n          "ticketPricing": "€12 (general admission), Free (during free hours)",\n          "rating": 4.6,\n          "timeTravel": "15 minutes (metro from El Rastro)"\n        },\n        {\n          "placeName": "Farewell Tapas",\n          "placeDetails": "Enjoy a final tapas meal in a neighborhood of your choice, reflecting on your Madrid adventure.",\n          "placeImageUrl": "https://www.wheretraveler.com/sites/default/files/images/resized/2019-06/51750512_10156845227247380_1401709353004664832_n_800x600.jpg",\n          "geoCoordinates": {\n             "latitude": 40.4150,\n             "longitude": -3.7025\n          },\n          "ticketPricing": "Varies depending on tapas and drinks",\n          "rating": 4.3,\n          "timeTravel": "10 minutes (from Reina Sofia Museum by walk or metro depending upon Tapas Zone)"\n        }\n      ]\n    }\n  }\n}\n```\n\n**Important Considerations for Budget Travel:**\n\n*   **Transportation:** Utilize Madrid\'s metro system. Consider purchasing a multi-day travel pass for cost savings. Walking is also a great way to explore the city center.\n*   **Food:** Look for "menú del día" (lunch menu) at restaurants for affordable midday meals. Tapas can be relatively inexpensive, especially if you find bars that offer them free with a drink. Supermarkets are also a good option for picnic supplies.\n*   **Free Activities:** Take advantage of free museum entry times, explore parks, and enjoy walking tours.\n*   **Accommodation:** Hostels or budget-friendly hostales are generally the most affordable options.\n*   **Water:** Carry a refillable water bottle and refill it at public fountains (Madrid has excellent tap water).\n\nEnjoy your trip to Madrid! Remember to double-check all pricing and details before you go. Have a fantastic time!\n',
        },
      ],
    },
  ],
});
